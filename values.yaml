grafana:
  replicas: 0

  image:
    repository: grafana/grafana
    tag: 10.4.2

  service:
    type: NodePort
    port: 3000

  nodeSelector:
    workload: grafana

  tolerations:
    - key: "node-role.kubernetes.io/control-plane"
      operator: "Exists"
      effect: "NoSchedule"

  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

  persistence:
    enabled: true
    size: 10Gi

  # FIX: required for Grafana 7.x â†’ 10.x upgrade (PVC permission issue)
  securityContext:
    runAsUser: 472
    runAsGroup: 472
    fsGroup: 472

  initChownData:
    enabled: true

  admin:
    existingSecret: grafana-admin-secret
    userKey: admin-user
    passwordKey: admin-password

  grafana.ini:
    server:
      root_url: "%(protocol)s://%(domain)s:%(http_port)s/"
    security:
      allow_embedding: true

